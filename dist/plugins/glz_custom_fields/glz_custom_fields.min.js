$(function(){var e;(textpattern.Relay.register("txpAsyncForm.success",t),null==e)&&((e={}).special_custom_types=["date-picker","time-picker"],e.no_value_custom_types=["text_input","textarea"],e.messages={textarea:"Each value on a separate line<br>One {default} value allowed",script:"File name in your custom scripts path",configure:"Configure custom scripts path"});function t(){$(".glz-custom-radio-field").length>0&&$(".glz-custom-radio-field").each(function(){custom_field_to_reset=$(this).find("input:first").attr("name"),$(this).find("label:first").after(' <span class="small"><a href="#" class="glz-custom-field-reset" name="'+custom_field_to_reset+'">Reset</a></span>'),$("input:radio[name="+custom_field_to_reset+"]").is(":checked")||$(".glz-custom-field-reset[name="+custom_field_to_reset+"]").addClass("disabled")})}function a(){$("textarea#value").length&&(e.textarea_value=$("textarea#value").html(),$("textarea#value + br + span.information").html(""),$("textarea#value").remove()),$("input#value").length||$(".glz-cf-value .txp-form-field-value").prepend('<input type="text" id="value" name="value" />'),$("input#value").attr("value","no value allowed").attr("disabled",!0),$("input#value + br + span.information").html("")}function s(){$("textarea#value").length&&($("textarea#value + br + span.information").html(""),$("textarea#value").remove()),$("input#value").length||$(".glz-cf-value .txp-form-field-value").prepend('<input type="text" id="value" name="value" />'),-1!=$.inArray($("input#value").attr("value"),["","no value allowed"])&&($("input#value").attr("value",""),$("input#value").attr("disabled",!1),$("input#value + br + span.information").html(e.messages.script))}function l(){$("select#custom_set_type").parent().find("br, span").remove(),-1!=$.inArray($("select#custom_set_type :selected").attr("value"),[].concat(e.special_custom_types,["multi-select","custom-script"]))&&$("select#custom_set_type").after('<br><span class="information"><a href="http://'+window.location.host+window.location.pathname+'?event=prefs#prefs_group_glz_custom_f">'+e.messages.configure+"</a></span>")}l(),-1!=$.inArray($("select#custom_set_type :selected").attr("value"),[].concat(e.special_custom_types,e.no_value_custom_types))?a():"custom-script"==$("select#custom_set_type :selected").attr("value")&&s(),$("select#custom_set_type").change(function(){l(),-1!=$.inArray($("select#custom_set_type :selected").attr("value"),[].concat(e.special_custom_types,e.no_value_custom_types))?a():"custom-script"==$("select#custom_set_type :selected").attr("value")?s():function(){$("input#value").length&&$("input#value").remove();$("textarea#value").length||($(".glz-cf-value .txp-form-field-value").prepend('<textarea id="value" name="value"></textarea>'),$("textarea#value + br + span.information").html(e.messages.textarea));e.textarea_value&&$("textarea#value").html(e.textarea_value)}()}),t(),$(".txp-layout").on("click",".glz-custom-field-reset",function(){return!$(this).hasClass("disabled")&&(custom_field_to_reset=$(this).attr("name"),$("input[name="+custom_field_to_reset+"]").prop("checked",!1),$(this).addClass("disabled"),0===$(this).siblings(".txp-form-radio-reset").length&&$(this).after('<input type="hidden" class="txp-form-radio-reset" value="" name="'+custom_field_to_reset+'" />'),!1)}),$(".txp-layout").on("click",".glz-custom-radio-field .radio",function(){custom_field_to_reanimate=$(this).attr("name"),$this_reset_button=$(".glz-custom-field-reset[name="+custom_field_to_reanimate+"]"),$this_reset_button.hasClass("disabled")&&($("input[type=hidden][name="+custom_field_to_reanimate+"]").remove(),$this_reset_button.removeClass("disabled"))})});
